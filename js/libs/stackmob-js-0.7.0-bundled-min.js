/*
 StackMob JS SDK Version 0.7.0 
 Copyright 2012 StackMob Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

// JSON
// 2011-02-23
// Public Domain.
// http://www.JSON.org/json2.js

// Underscore.js 1.4.1
// http://underscorejs.org
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore may be freely distributed under the MIT license.

// Backbone.js 0.9.2
// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org

var JSON;JSON||(JSON={});
(function(){function e(a){return 10>a?"0"+a:a}function j(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=p[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,d){var e,p,n,u,y=g,w,r=d[b];r&&("object"===typeof r&&"function"===typeof r.toJSON)&&(r=r.toJSON(b));"function"===typeof l&&(r=l.call(d,b,r));switch(typeof r){case "string":return j(r);case "number":return isFinite(r)?String(r):"null";case "boolean":case "null":return String(r);case "object":if(!r)return"null";
g+=h;w=[];if("[object Array]"===Object.prototype.toString.apply(r)){u=r.length;for(e=0;e<u;e+=1)w[e]=a(e,r)||"null";n=0===w.length?"[]":g?"[\n"+g+w.join(",\n"+g)+"\n"+y+"]":"["+w.join(",")+"]";g=y;return n}if(l&&"object"===typeof l){u=l.length;for(e=0;e<u;e+=1)"string"===typeof l[e]&&(p=l[e],(n=a(p,r))&&w.push(j(p)+(g?": ":":")+n))}else for(p in r)Object.prototype.hasOwnProperty.call(r,p)&&(n=a(p,r))&&w.push(j(p)+(g?": ":":")+n);n=0===w.length?"{}":g?"{\n"+g+w.join(",\n"+g)+"\n"+y+"}":"{"+w.join(",")+
"}";g=y;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,e){var p;h=g="";if("number"===typeof e)for(p=0;p<e;p+=1)h+=" ";else"string"===typeof e&&(h=e);if((l=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function g(a,b){var e,h,i=a[b];if(i&&"object"===typeof i)for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(h=g(i,e),void 0!==h?i[e]=h:delete i[e]);return d.call(a,b,i)}var e,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof d?g({"":e},""):e;throw new SyntaxError("JSON.parse");})})();(function(){var e=this,j=e._,a={},b=Array.prototype,d=Object.prototype,g=b.push,h=b.slice,p=b.concat,l=d.toString,i=d.hasOwnProperty,s=b.forEach,q=b.map,v=b.reduce,n=b.reduceRight,u=b.filter,y=b.every,w=b.some,r=b.indexOf,C=b.lastIndexOf,d=Array.isArray,E=Object.keys,A=Function.prototype.bind,f=function(m){if(m instanceof f)return m;if(!(this instanceof f))return new f(m);this._wrapped=m};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=
f):e._=f;f.VERSION="1.4.1";var t=f.each=f.forEach=function(m,c,b){if(s&&m.forEach===s)m.forEach(c,b);else if(m.length===+m.length)for(var d=0,k=m.length;d<k&&c.call(b,m[d],d,m)!==a;d++);else for(d in m)if(f.has(m,d)&&c.call(b,m[d],d,m)===a)break};f.map=f.collect=function(m,c,a){var b=[];return q&&m.map===q?m.map(c,a):(t(m,function(m,d,k){b[b.length]=c.call(a,m,d,k)}),b)};f.reduce=f.foldl=f.inject=function(m,c,a,b){var d=2<arguments.length;if(v&&m.reduce===v)return b&&(c=f.bind(c,b)),d?m.reduce(c,
a):m.reduce(c);t(m,function(m,k,f){d?a=c.call(b,a,m,k,f):(a=m,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return a};f.reduceRight=f.foldr=function(m,c,a,b){var d=2<arguments.length;if(n&&m.reduceRight===n)return b&&(c=f.bind(c,b)),2<arguments.length?m.reduceRight(c,a):m.reduceRight(c);var k=m.length;if(k!==+k)var g=f.keys(m),k=g.length;t(m,function(f,e,x){e=g?g[--k]:--k;d?a=c.call(b,a,m[e],e,x):(a=m[e],d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");
return a};f.find=f.detect=function(c,a,b){var d;return z(c,function(c,m,k){if(a.call(b,c,m,k))return d=c,!0}),d};f.filter=f.select=function(c,a,b){var d=[];return u&&c.filter===u?c.filter(a,b):(t(c,function(c,m,k){a.call(b,c,m,k)&&(d[d.length]=c)}),d)};f.reject=function(c,a,b){var d=[];return t(c,function(c,m,k){a.call(b,c,m,k)||(d[d.length]=c)}),d};f.every=f.all=function(c,b,d){b||(b=f.identity);var k=!0;return y&&c.every===y?c.every(b,d):(t(c,function(c,m,f){if(!(k=k&&b.call(d,c,m,f)))return a}),
!!k)};var z=f.some=f.any=function(c,b,d){b||(b=f.identity);var k=!1;return w&&c.some===w?c.some(b,d):(t(c,function(c,m,f){if(k||(k=b.call(d,c,m,f)))return a}),!!k)};f.contains=f.include=function(c,a){var b=!1;return r&&c.indexOf===r?-1!=c.indexOf(a):(b=z(c,function(c){return c===a}),b)};f.invoke=function(c,a){var b=h.call(arguments,2);return f.map(c,function(c){return(f.isFunction(a)?a:c[a]).apply(c,b)})};f.pluck=function(c,a){return f.map(c,function(c){return c[a]})};f.where=function(c,a){return f.isEmpty(a)?
[]:f.filter(c,function(c){for(var m in a)if(a[m]!==c[m])return!1;return!0})};f.max=function(c,a,b){if(!a&&f.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.max.apply(Math,c);if(!a&&f.isEmpty(c))return-Infinity;var d={computed:-Infinity};return t(c,function(c,m,k){m=a?a.call(b,c,m,k):c;m>=d.computed&&(d={value:c,computed:m})}),d.value};f.min=function(c,a,b){if(!a&&f.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.min.apply(Math,c);if(!a&&f.isEmpty(c))return Infinity;var d={computed:Infinity};
return t(c,function(c,m,k){m=a?a.call(b,c,m,k):c;m<d.computed&&(d={value:c,computed:m})}),d.value};f.shuffle=function(c){var a,b=0,d=[];return t(c,function(c){a=f.random(b++);d[b-1]=d[a];d[a]=c}),d};var B=function(c){return f.isFunction(c)?c:function(a){return a[c]}};f.sortBy=function(c,a,b){var d=B(a);return f.pluck(f.map(c,function(c,a,m){return{value:c,index:a,criteria:d.call(b,c,a,m)}}).sort(function(c,a){var m=c.criteria,b=a.criteria;if(m!==b){if(m>b||void 0===m)return 1;if(m<b||void 0===b)return-1}return c.index<
a.index?-1:1}),"value")};var c=function(c,a,b,d){var k={},f=B(a);return t(c,function(a,g){var e=f.call(b,a,g,c);d(k,e,a)}),k};f.groupBy=function(a,b,d){return c(a,b,d,function(c,a,m){(f.has(c,a)?c[a]:c[a]=[]).push(m)})};f.countBy=function(a,b,d){return c(a,b,d,function(c,a){f.has(c,a)||(c[a]=0);c[a]++})};f.sortedIndex=function(c,a,b,d){for(var b=null==b?f.identity:B(b),a=b.call(d,a),k=0,g=c.length;k<g;){var e=k+g>>>1;b.call(d,c[e])<a?k=e+1:g=e}return k};f.toArray=function(c){return c?c.length===+c.length?
h.call(c):f.values(c):[]};f.size=function(c){return c.length===+c.length?c.length:f.keys(c).length};f.first=f.head=f.take=function(c,a,b){return null!=a&&!b?h.call(c,0,a):c[0]};f.initial=function(c,a,b){return h.call(c,0,c.length-(null==a||b?1:a))};f.last=function(c,a,b){return null!=a&&!b?h.call(c,Math.max(c.length-a,0)):c[c.length-1]};f.rest=f.tail=f.drop=function(c,a,b){return h.call(c,null==a||b?1:a)};f.compact=function(c){return f.filter(c,function(c){return!!c})};var k=function(c,a,b){return t(c,
function(c){f.isArray(c)?a?g.apply(b,c):k(c,a,b):b.push(c)}),b};f.flatten=function(c,a){return k(c,a,[])};f.without=function(c){return f.difference(c,h.call(arguments,1))};f.uniq=f.unique=function(c,a,b,d){var b=b?f.map(c,b,d):c,k=[],g=[];return t(b,function(b,d){if(a?!d||g[g.length-1]!==b:!f.contains(g,b))g.push(b),k.push(c[d])}),k};f.union=function(){return f.uniq(p.apply(b,arguments))};f.intersection=function(c){var a=h.call(arguments,1);return f.filter(f.uniq(c),function(c){return f.every(a,function(a){return 0<=
f.indexOf(a,c)})})};f.difference=function(c){var a=p.apply(b,h.call(arguments,1));return f.filter(c,function(c){return!f.contains(a,c)})};f.zip=function(){for(var c=h.call(arguments),a=f.max(f.pluck(c,"length")),b=Array(a),d=0;d<a;d++)b[d]=f.pluck(c,""+d);return b};f.object=function(c,a){for(var b={},d=0,k=c.length;d<k;d++)a?b[c[d]]=a[d]:b[c[d][0]]=c[d][1];return b};f.indexOf=function(c,a,b){var d=0,k=c.length;if(b){if("number"!=typeof b)return d=f.sortedIndex(c,a),c[d]===a?d:-1;d=0>b?Math.max(0,
k+b):b}if(r&&c.indexOf===r)return c.indexOf(a,b);for(;d<k;d++)if(c[d]===a)return d;return-1};f.lastIndexOf=function(c,a,b){var d=null!=b;if(C&&c.lastIndexOf===C)return d?c.lastIndexOf(a,b):c.lastIndexOf(a);for(b=d?b:c.length;b--;)if(c[b]===a)return b;return-1};f.range=function(c,a,b){1>=arguments.length&&(a=c||0,c=0);for(var b=arguments[2]||1,d=Math.max(Math.ceil((a-c)/b),0),k=0,f=Array(d);k<d;)f[k++]=c,c+=b;return f};var x=function(){};f.bind=function(c,a){var b,d;if(c.bind===A&&A)return A.apply(c,
h.call(arguments,1));if(!f.isFunction(c))throw new TypeError;return d=h.call(arguments,2),b=function(){if(this instanceof b){x.prototype=c.prototype;var k=new x,f=c.apply(k,d.concat(h.call(arguments)));return Object(f)===f?f:k}return c.apply(a,d.concat(h.call(arguments)))}};f.bindAll=function(c){var a=h.call(arguments,1);return 0==a.length&&(a=f.functions(c)),t(a,function(a){c[a]=f.bind(c[a],c)}),c};f.memoize=function(c,a){var b={};return a||(a=f.identity),function(){var d=a.apply(this,arguments);
return f.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}};f.delay=function(c,a){var b=h.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)};f.defer=function(c){return f.delay.apply(f,[c,1].concat(h.call(arguments,1)))};f.throttle=function(c,a){var b,d,k,g,e,x,h=f.debounce(function(){e=g=!1},a);return function(){b=this;d=arguments;return k||(k=setTimeout(function(){k=null;e&&(x=c.apply(b,d));h()},a)),g?e=!0:(g=!0,x=c.apply(b,d)),h(),x}};f.debounce=function(c,a,b){var d,k;return function(){var f=
this,g=arguments,e=b&&!d;return clearTimeout(d),d=setTimeout(function(){d=null;b||(k=c.apply(f,g))},a),e&&(k=c.apply(f,g)),k}};f.once=function(c){var a=!1,b;return function(){return a?b:(a=!0,b=c.apply(this,arguments),c=null,b)}};f.wrap=function(c,a){return function(){var b=[c];return g.apply(b,arguments),a.apply(this,b)}};f.compose=function(){var c=arguments;return function(){for(var a=arguments,b=c.length-1;0<=b;b--)a=[c[b].apply(this,a)];return a[0]}};f.after=function(c,a){return 0>=c?a():function(){if(1>
--c)return a.apply(this,arguments)}};f.keys=E||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var a=[],b;for(b in c)f.has(c,b)&&(a[a.length]=b);return a};f.values=function(c){var a=[],b;for(b in c)f.has(c,b)&&a.push(c[b]);return a};f.pairs=function(c){var a=[],b;for(b in c)f.has(c,b)&&a.push([b,c[b]]);return a};f.invert=function(c){var a={},b;for(b in c)f.has(c,b)&&(a[c[b]]=b);return a};f.functions=f.methods=function(c){var a=[],b;for(b in c)f.isFunction(c[b])&&a.push(b);return a.sort()};
f.extend=function(c){return t(h.call(arguments,1),function(a){for(var b in a)c[b]=a[b]}),c};f.pick=function(c){var a={},d=p.apply(b,h.call(arguments,1));return t(d,function(b){b in c&&(a[b]=c[b])}),a};f.omit=function(c){var a={},d=p.apply(b,h.call(arguments,1)),k;for(k in c)f.contains(d,k)||(a[k]=c[k]);return a};f.defaults=function(c){return t(h.call(arguments,1),function(a){for(var b in a)null==c[b]&&(c[b]=a[b])}),c};f.clone=function(c){return f.isObject(c)?f.isArray(c)?c.slice():f.extend({},c):
c};f.tap=function(c,a){return a(c),c};var F=function(c,a,b,d){if(c===a)return 0!==c||1/c==1/a;if(null==c||null==a)return c===a;c instanceof f&&(c=c._wrapped);a instanceof f&&(a=a._wrapped);var k=l.call(c);if(k!=l.call(a))return!1;switch(k){case "[object String]":return c==String(a);case "[object Number]":return c!=+c?a!=+a:0==c?1/c==1/a:c==+a;case "[object Date]":case "[object Boolean]":return+c==+a;case "[object RegExp]":return c.source==a.source&&c.global==a.global&&c.multiline==a.multiline&&c.ignoreCase==
a.ignoreCase}if("object"!=typeof c||"object"!=typeof a)return!1;for(var g=b.length;g--;)if(b[g]==c)return d[g]==a;b.push(c);d.push(a);var g=0,e=!0;if("[object Array]"==k){if(g=c.length,e=g==a.length)for(;g--&&(e=F(c[g],a[g],b,d)););}else{var k=c.constructor,x=a.constructor;if(k!==x&&(!f.isFunction(k)||!(k instanceof k&&f.isFunction(x)&&x instanceof x)))return!1;for(var h in c)if(f.has(c,h)&&(g++,!(e=f.has(a,h)&&F(c[h],a[h],b,d))))break;if(e){for(h in a)if(f.has(a,h)&&!g--)break;e=!g}}return b.pop(),
d.pop(),e};f.isEqual=function(c,a){return F(c,a,[],[])};f.isEmpty=function(c){if(null==c)return!0;if(f.isArray(c)||f.isString(c))return 0===c.length;for(var a in c)if(f.has(c,a))return!1;return!0};f.isElement=function(c){return!!c&&1===c.nodeType};f.isArray=d||function(c){return"[object Array]"==l.call(c)};f.isObject=function(c){return c===Object(c)};t("Arguments Function String Number Date RegExp".split(" "),function(c){f["is"+c]=function(a){return l.call(a)=="[object "+c+"]"}});f.isArguments(arguments)||
(f.isArguments=function(c){return!!c&&!!f.has(c,"callee")});"function"!=typeof/./&&(f.isFunction=function(c){return"function"==typeof c});f.isFinite=function(c){return f.isNumber(c)&&isFinite(c)};f.isNaN=function(c){return f.isNumber(c)&&c!=+c};f.isBoolean=function(c){return!0===c||!1===c||"[object Boolean]"==l.call(c)};f.isNull=function(c){return null===c};f.isUndefined=function(c){return void 0===c};f.has=function(c,a){return i.call(c,a)};f.noConflict=function(){return e._=j,this};f.identity=function(c){return c};
f.times=function(c,a,b){for(var d=0;d<c;d++)a.call(b,d)};f.random=function(c,a){return null==a&&(a=c,c=0),c+(0|Math.random()*(a-c+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=f.invert(D.escape);var H={escape:RegExp("["+f.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+f.keys(D.unescape).join("|")+")","g")};f.each(["escape","unescape"],function(c){f[c]=function(a){return null==a?"":(""+a).replace(H[c],function(a){return D[c][a]})}});
f.result=function(c,a){if(null==c)return null;var b=c[a];return f.isFunction(b)?b.call(c):b};f.mixin=function(c){t(f.functions(c),function(a){var b=f[a]=c[a];f.prototype[a]=function(){var c=[this._wrapped];g.apply(c,arguments);c=b.apply(f,c);return this._chain?f(c).chain():c}})};var I=0;f.uniqueId=function(c){var a=I++;return c?c+a:a};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t",
"\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;f.template=function(c,a,b){var b=f.defaults({},b,f.templateSettings),d=RegExp([(b.escape||G).source,(b.interpolate||G).source,(b.evaluate||G).source].join("|")+"|$","g"),k=0,g="__p+='";c.replace(d,function(a,b,d,f,e){g+=c.slice(k,e).replace(K,function(c){return"\\"+J[c]});g+=b?"'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":d?"'+\n((__t=("+d+"))==null?'':__t)+\n'":f?"';\n"+f+"\n__p+='":"";k=e+a.length});g+="';\n";b.variable||(g=
"with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{var e=new Function(b.variable||"obj","_",g)}catch(x){throw x.source=g,x;}if(a)return e(a,f);a=function(c){return e.call(this,c,f)};return a.source="function("+(b.variable||"obj")+"){\n"+g+"}",a};f.chain=function(c){return f(c).chain()};f.mixin(f);t("pop push reverse shift sort splice unshift".split(" "),function(c){var a=b[c];f.prototype[c]=function(){var b=
this._wrapped;return a.apply(b,arguments),("shift"==c||"splice"==c)&&0===b.length&&delete b[0],this._chain?f(b).chain():b}});t(["concat","join","slice"],function(c){var a=b[c];f.prototype[c]=function(){var c=a.apply(this._wrapped,arguments);return this._chain?f(c).chain():c}});f.extend(f.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var e=this,j=e.Backbone,a=Array.prototype.slice,b=Array.prototype.splice,d;d="undefined"!==typeof exports?exports:e.Backbone={};d.VERSION="0.9.2";var g=e._;!g&&"undefined"!==typeof require&&(g=require("underscore"));var h=e.jQuery||e.Zepto||e.ender;d.setDomLibrary=function(c){h=c};d.noConflict=function(){e.Backbone=j;return this};d.emulateHTTP=!1;d.emulateJSON=!1;var p=/\s+/,l=d.Events={on:function(c,a,b){var d,g,f,e,h;if(!a)return this;c=c.split(p);for(d=this._callbacks||(this._callbacks=
{});g=c.shift();)f=(h=d[g])?h.tail:{},f.next=e={},f.context=b,f.callback=a,d[g]={tail:e,next:h?h.next:f};return this},off:function(c,a,b){var d,f,e,h,n,i;if(f=this._callbacks){if(!c&&!a&&!b)return delete this._callbacks,this;for(c=c?c.split(p):g.keys(f);d=c.shift();)if(e=f[d],delete f[d],e&&(a||b))for(h=e.tail;(e=e.next)!==h;)if(n=e.callback,i=e.context,a&&n!==a||b&&i!==b)this.on(d,n,i);return this}},trigger:function(c){var b,d,g,f,e,h;if(!(g=this._callbacks))return this;e=g.all;c=c.split(p);for(h=
a.call(arguments,1);b=c.shift();){if(d=g[b])for(f=d.tail;(d=d.next)!==f;)d.callback.apply(d.context||this,h);if(d=e){f=d.tail;for(b=[b].concat(h);(d=d.next)!==f;)d.callback.apply(d.context||this,b)}}return this}};l.bind=l.on;l.unbind=l.off;var i=d.Model=function(c,a){var b;c||(c={});a&&a.parse&&(c=this.parse(c));if(b=z(this,"defaults"))c=g.extend({},b,c);a&&a.collection&&(this.collection=a.collection);this.attributes={};this._escapedAttributes={};this.cid=g.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(c,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=g.clone(this.attributes);this.initialize.apply(this,arguments)};g.extend(i.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return g.clone(this.attributes)},get:function(c){return this.attributes[c]},escape:function(c){var a;if(a=this._escapedAttributes[c])return a;a=this.get(c);return this._escapedAttributes[c]=g.escape(null==
a?"":""+a)},has:function(c){return null!=this.get(c)},set:function(c,a,b){var d,f;g.isObject(c)||null==c?(d=c,b=a):(d={},d[c]=a);b||(b={});if(!d)return this;d instanceof i&&(d=d.attributes);if(b.unset)for(f in d)d[f]=void 0;if(!this._validate(d,b))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var a=b.changes={},e=this.attributes,h=this._escapedAttributes,n=this._previousAttributes||{};for(f in d){c=d[f];if(!g.isEqual(e[f],c)||b.unset&&g.has(e,f))delete h[f],(b.silent?this._silent:
a)[f]=!0;b.unset?delete e[f]:e[f]=c;!g.isEqual(n[f],c)||g.has(e,f)!=g.has(n,f)?(this.changed[f]=c,b.silent||(this._pending[f]=!0)):(delete this.changed[f],delete this._pending[f])}b.silent||this.change(b);return this},unset:function(c,a){(a||(a={})).unset=!0;return this.set(c,null,a)},clear:function(c){(c||(c={})).unset=!0;return this.set(g.clone(this.attributes),c)},fetch:function(c){var c=c?g.clone(c):{},a=this,b=c.success;c.success=function(d,f,g){if(!a.set(a.parse(d,g),c))return!1;b&&b(a,d)};
c.error=d.wrapError(c.error,a,c);return(this.sync||d.sync).call(this,"read",this,c)},save:function(c,a,b){var f,e;g.isObject(c)||null==c?(f=c,b=a):(f={},f[c]=a);b=b?g.clone(b):{};if(b.wait){if(!this._validate(f,b))return!1;e=g.clone(this.attributes)}c=g.extend({},b,{silent:!0});if(f&&!this.set(f,b.wait?c:b))return!1;var h=this,n=b.success;b.success=function(c,a,d){a=h.parse(c,d);b.wait&&(delete b.wait,a=g.extend(f||{},a));if(!h.set(a,b))return!1;n?n(h,c):h.trigger("sync",h,c,b)};b.error=d.wrapError(b.error,
h,b);a=this.isNew()?"create":"update";a=(this.sync||d.sync).call(this,a,this,b);b.wait&&this.set(e,c);return a},destroy:function(c){var c=c?g.clone(c):{},a=this,b=c.success,f=function(){a.trigger("destroy",a,a.collection,c)};if(this.isNew())return f(),!1;c.success=function(d){c.wait&&f();b?b(a,d):a.trigger("sync",a,d,c)};c.error=d.wrapError(c.error,a,c);var e=(this.sync||d.sync).call(this,"delete",this,c);c.wait||f();return e},url:function(){var c=z(this,"urlRoot")||z(this.collection,"url")||B();
return this.isNew()?c:c+("/"==c.charAt(c.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(c){return c},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(c){c||(c={});var a=this._changing;this._changing=!0;for(var b in this._silent)this._pending[b]=!0;var d=g.extend({},c.changes,this._silent);this._silent={};for(b in d)this.trigger("change:"+b,this,this.get(b),c);if(a)return this;for(;!g.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,c);for(b in this.changed)!this._pending[b]&&!this._silent[b]&&delete this.changed[b];this._previousAttributes=g.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(c){return!arguments.length?!g.isEmpty(this.changed):g.has(this.changed,c)},changedAttributes:function(c){if(!c)return this.hasChanged()?g.clone(this.changed):!1;var a,b=!1,d=this._previousAttributes,f;for(f in c)if(!g.isEqual(d[f],a=c[f]))(b||(b={}))[f]=a;return b},previous:function(c){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[c]},previousAttributes:function(){return g.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(c,a){if(a.silent||!this.validate)return!0;var c=g.extend({},this.attributes,c),b=this.validate(c,a);if(!b)return!0;a&&a.error?a.error(this,b,a):this.trigger("error",this,b,a);return!1}});var s=d.Collection=function(c,a){a||(a={});a.model&&(this.model=a.model);a.comparator&&(this.comparator=a.comparator);
this._reset();this.initialize.apply(this,arguments);c&&this.reset(c,{silent:!0,parse:a.parse})};g.extend(s.prototype,l,{model:i,initialize:function(){},toJSON:function(c){return this.map(function(a){return a.toJSON(c)})},add:function(c,a){var d,f,e,h,n,i={},p={},l=[];a||(a={});c=g.isArray(c)?c.slice():[c];d=0;for(f=c.length;d<f;d++){if(!(e=c[d]=this._prepareModel(c[d],a)))throw Error("Can't add an invalid model to a collection");h=e.cid;n=e.id;i[h]||this._byCid[h]||null!=n&&(p[n]||this._byId[n])?
l.push(d):i[h]=p[n]=e}for(d=l.length;d--;)c.splice(l[d],1);d=0;for(f=c.length;d<f;d++)(e=c[d]).on("all",this._onModelEvent,this),this._byCid[e.cid]=e,null!=e.id&&(this._byId[e.id]=e);this.length+=f;b.apply(this.models,[null!=a.at?a.at:this.models.length,0].concat(c));this.comparator&&this.sort({silent:!0});if(a.silent)return this;d=0;for(f=this.models.length;d<f;d++)if(i[(e=this.models[d]).cid])a.index=d,e.trigger("add",e,this,a);return this},remove:function(c,a){var b,d,f,e;a||(a={});c=g.isArray(c)?
c.slice():[c];b=0;for(d=c.length;b<d;b++)if(e=this.getByCid(c[b])||this.get(c[b]))delete this._byId[e.id],delete this._byCid[e.cid],f=this.indexOf(e),this.models.splice(f,1),this.length--,a.silent||(a.index=f,e.trigger("remove",e,this,a)),this._removeReference(e);return this},push:function(c,a){c=this._prepareModel(c,a);this.add(c,a);return c},pop:function(c){var a=this.at(this.length-1);this.remove(a,c);return a},unshift:function(c,a){c=this._prepareModel(c,a);this.add(c,g.extend({at:0},a));return c},
shift:function(c){var a=this.at(0);this.remove(a,c);return a},get:function(c){return null==c?void 0:this._byId[null!=c.id?c.id:c]},getByCid:function(c){return c&&this._byCid[c.cid||c]},at:function(c){return this.models[c]},where:function(c){return g.isEmpty(c)?[]:this.filter(function(a){for(var b in c)if(c[b]!==a.get(b))return!1;return!0})},sort:function(c){c||(c={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var a=g.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(a):this.models.sort(a);c.silent||this.trigger("reset",this,c);return this},pluck:function(c){return g.map(this.models,function(a){return a.get(c)})},reset:function(c,a){c||(c=[]);a||(a={});for(var b=0,d=this.models.length;b<d;b++)this._removeReference(this.models[b]);this._reset();this.add(c,g.extend({silent:!0},a));a.silent||this.trigger("reset",this,a);return this},fetch:function(c){c=c?g.clone(c):{};void 0===c.parse&&(c.parse=!0);var a=this,b=c.success;c.success=function(d,
f,e){a[c.add?"add":"reset"](a.parse(d,e),c);b&&b(a,d)};c.error=d.wrapError(c.error,a,c);return(this.sync||d.sync).call(this,"read",this,c)},create:function(c,a){var b=this,a=a?g.clone(a):{},c=this._prepareModel(c,a);if(!c)return!1;a.wait||b.add(c,a);var d=a.success;a.success=function(f,e){a.wait&&b.add(f,a);d?d(f,e):f.trigger("sync",c,e,a)};c.save(null,a);return c},parse:function(c){return c},chain:function(){return g(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(c,a){a||(a={});c instanceof i?c.collection||(c.collection=this):(a.collection=this,c=new this.model(c,a),c._validate(c.attributes,a)||(c=!1));return c},_removeReference:function(c){this==c.collection&&delete c.collection;c.off("all",this._onModelEvent,this)},_onModelEvent:function(c,a,b,d){("add"==c||"remove"==c)&&b!=this||("destroy"==c&&this.remove(a,d),a&&c==="change:"+a.idAttribute&&(delete this._byId[a.previous(a.idAttribute)],this._byId[a.id]=a),this.trigger.apply(this,
arguments))}});g.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(a){s.prototype[a]=function(){return g[a].apply(g,[this.models].concat(g.toArray(arguments)))}});var q=d.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},v=/:\w+/g,
n=/\*\w+/g,u=/[-[\]{}()+?.,\\^$|#\s]/g;g.extend(q.prototype,l,{initialize:function(){},route:function(a,b,f){d.history||(d.history=new y);g.isRegExp(a)||(a=this._routeToRegExp(a));f||(f=this[b]);d.history.route(a,g.bind(function(e){e=this._extractParameters(a,e);f&&f.apply(this,e);this.trigger.apply(this,["route:"+b].concat(e));d.history.trigger("route",this,b,e)},this));return this},navigate:function(a,b){d.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var d=a.length;b<d;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(u,"\\$&").replace(v,"([^/]+)").replace(n,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var y=d.History=function(){this.handlers=[];g.bindAll(this,"checkUrl")},w=/^[#\/]/,r=/msie [\w.]+/;y.started=!1;g.extend(y.prototype,l,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,d=window.location.search;d&&(a+=d)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(w,"")},start:function(a){if(y.started)throw Error("Backbone.history has already been started");y.started=!0;this.options=g.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=r.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(w,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);y.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return g.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!y.started)return!1;if(!b||!0===b)b={trigger:b};var d=(a||"").replace(w,"");this.fragment!=d&&(this._hasPushState?(0!=d.indexOf(this.options.root)&&(d=this.options.root+d),this.fragment=d,window.history[b.replace?"replaceState":"pushState"]({},document.title,d)):this._wantsHashChange?(this.fragment=d,this._updateHash(window.location,d,b.replace),this.iframe&&d!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,d,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,d){d?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var C=d.View=function(a){this.cid=g.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},E=/^(\S+)\s*(.*)$/,A="model collection el id attributes className tagName".split(" ");
g.extend(C.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,d){a=document.createElement(a);b&&h(a).attr(b);d&&h(a).html(d);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=z(this,"events"))){this.undelegateEvents();
for(var b in a){var d=a[b];g.isFunction(d)||(d=this[a[b]]);if(!d)throw Error('Method "'+a[b]+'" does not exist');var f=b.match(E),e=f[1],f=f[2],d=g.bind(d,this),e=e+(".delegateEvents"+this.cid);""===f?this.$el.bind(e,d):this.$el.delegate(f,e,d)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=g.extend({},this.options,a));for(var b=0,d=A.length;b<d;b++){var f=A[b];a[f]&&(this[f]=a[f])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=z(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});i.extend=s.extend=q.extend=C.extend=function(a,b){var d=this,f;f=a&&a.hasOwnProperty("constructor")?a.constructor:function(){d.apply(this,arguments)};g.extend(f,d);t.prototype=d.prototype;f.prototype=new t;a&&g.extend(f.prototype,a);b&&g.extend(f,b);f.prototype.constructor=f;f.__super__=d.prototype;f.extend=this.extend;return f};var f={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};d.sync=function(a,b,e){var n=f[a];e||(e={});var i={type:n,dataType:"json"};e.url||(i.url=z(b,"url")||B());if(!e.data&&b&&("create"==a||"update"==a))i.contentType="application/json",i.data=JSON.stringify(b.toJSON());d.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(d.emulateHTTP&&("PUT"===n||"DELETE"===n))d.emulateJSON&&(i.data._method=n),i.type="POST",i.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
n)};"GET"!==i.type&&!d.emulateJSON&&(i.processData=!1);return h.ajax(g.extend(i,e))};d.wrapError=function(a,b,d){return function(f,e){e=f===b?e:f;a?a(b,e,d):b.trigger("error",b,e,d)}};var t=function(){},z=function(a,b){return!a||!a[b]?null:g.isFunction(a[b])?a[b]():a[b]},B=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){window.StackMob=this.StackMob={DEFAULT_API_VERSION:0,DEFAULT_LOGIN_SCHEMA:"user",DEFAULT_LOGIN_FIELD:"username",DEFAULT_PASSWORD_FIELD:"password",EARTH_RADIANS_MI:3956.6,EARTH_RADIANS_KM:6367.5,FORCE_CREATE_REQUEST:"stackmob_force_create_request",ARRAY_FIELDNAME:"stackmob_array_fieldname",ARRAY_VALUES:"stackmob_array_values",CASCADE_DELETE:"stackmob_cascade_delete",HARD_DELETE:!0,SOFT_DELETE:!1,API_SERVER:"api.stackmob.com",RETRY_WAIT:1E4,RETRY_ATTEMPTS:3,REFRESH_TOKEN_KEY:"oauth2.refreshToken",
POST:"POST",PUT:"PUT",DELETE:"DELETE",CONTENT_TYPE_JSON:"application/json",apiVersion:0,sdkVersion:"0.7.0",publicKey:null,Storage:{STORAGE_PREFIX:"stackmob.",persist:function(e,j){localStorage&&localStorage.setItem(this.STORAGE_PREFIX+e,j)},retrieve:function(e){return localStorage?localStorage.getItem(this.STORAGE_PREFIX+e):null},remove:function(e){localStorage&&localStorage.removeItem(this.STORAGE_PREFIX+e)}},_generateCallbacks:function(e,j){e.success=function(a){j.isValidResult(a)?"function"===
typeof j.yes&&j.yes(a):"function"===typeof j.no&&j.no(a)};!e.error&&"function"===typeof j.error&&(e.error=j.error);return e},_containsCallbacks:function(e,j){return"object"==typeof e&&_.some(j,function(a){return"function"==typeof e[a]})},getLoggedInUser:function(e){var j=!this.isOAuth2Mode()&&this.Storage.retrieve(this.loggedInUserKey)||this.Storage.retrieve("oauth2.user");if(e&&e.success)this.hasValidOAuth(e);else return this.isLoggedIn(e)&&j?j:null},isLoggedIn:function(e){if(this._containsCallbacks(e,
["yes","no"]))e=this._generateCallbacks(e,{isValidResult:function(e){return"undefined"!==typeof e},yes:e.yes,no:e.no,error:e.no}),this.hasValidOAuth(e);else return!this.isLoggedOut()||this.hasValidOAuth(e)},isUserLoggedIn:function(e,j){if(this._containsCallbacks(j,["yes","no"]))j=this._generateCallbacks(j,{isValidResult:function(a){return a==e},yes:j.yes,no:j.no,error:j.no}),this.hasValidOAuth(j);else return e==this.getLoggedInUser(j)},isLoggedOut:function(e){if(this._containsCallbacks(e,["yes","no"]))e=
this._generateCallbacks(e,{isValidResult:function(e){return"undefined"==typeof e},yes:e.yes,no:e.no,error:e.yes}),this.hasValidOAuth(e);else return!this.hasValidOAuth(e)},getScheme:function(){return!0===this.secure?"https":"http"},getDevAPIBase:function(){return"undefined"!==typeof PhoneGap?this.getScheme()+"://"+StackMob.API_SERVER+"/":!0===this.fullURL?this.getScheme()+"://dev."+this.appName+"."+this.clientSubdomain+".stackmobapp.com/":"/"},getProdAPIBase:function(){return"undefined"!==typeof PhoneGap?
this.getScheme()+"://"+StackMob.API_SERVER+"/":!0===this.fullURL?this.getScheme()+"://"+this.appName+"."+this.clientSubdomain+".stackmobapp.com/":"/"},getBaseURL:function(){return StackMob.apiURL||(StackMob.fullURL?0===StackMob.apiVersion?StackMob.getDevAPIBase():StackMob.getProdAPIBase():window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/")},throwError:function(e){throw Error(e);},urlError:function(){this.throwError('A "url" property or function must be specified')},
requirePublicKey:function(){StackMob.publicKey||this.throwError("Error: This requires that you initialize StackMob with a public key.")},isOAuth2Mode:function(){return!isNaN(StackMob.publicKey&&!StackMob.privateKey)},prepareCredsForSaving:function(e,j,a,b,d){b=(new Date).getTime()+1E3*b;e={"oauth2.accessToken":e,"oauth2.macKey":a,"oauth2.expires":b,"oauth2.user":d};e[StackMob.REFRESH_TOKEN_KEY]=j;return e},saveOAuthCredentials:function(e){var j=e["oauth2.accessToken"],a=e[StackMob.REFRESH_TOKEN_KEY];
this.Storage.retrieve("oauth2.accessToken")!=j&&this.Storage.persist("oauth2.expires",e["oauth2.expires"]);this.Storage.persist("oauth2.accessToken",j);this.Storage.persist(StackMob.REFRESH_TOKEN_KEY,a);this.Storage.persist("oauth2.macKey",e["oauth2.macKey"]);this.Storage.persist("oauth2.user",e["oauth2.user"])},hasValidOAuth:function(e){if(!this.isOAuth2Mode())return e&&e.error&&e.error(),!1;var j=this.getOAuthCredentials();if(!_.all([j["oauth2.accessToken"],j["oauth2.macKey"],j["oauth2.expires"]||
0],_.identity))return e&&e.error&&e.error(),!1;if(StackMob.hasExpiredOAuth())if(e&&e.success){var a=e.success;e.success=function(b){a(b[StackMob.loginField])};StackMob.refreshSession.call(StackMob,e)}else return!1;else return e&&e.success&&e.success(this.Storage.retrieve("oauth2.user")),this.Storage.retrieve("oauth2.user")},shouldSendRefreshToken:function(){return this.hasExpiredOAuth()&&this.hasRefreshToken()&&this.shouldKeepLoggedIn()},keepLoggedIn:function(e){StackMob.Storage.persist("oauth2.shouldKeepLoggedIn",
!0===e)},shouldKeepLoggedIn:function(){return"true"===StackMob.Storage.retrieve("oauth2.shouldKeepLoggedIn")},hasRefreshToken:function(){var e=this.getOAuthCredentials();return e&&"undefined"!==typeof e[StackMob.REFRESH_TOKEN_KEY]&&null!=e[StackMob.REFRESH_TOKEN_KEY]},getRefreshToken:function(){return this.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY]},hasExpiredOAuth:function(){return this.isOAuth2Mode()&&null==this.getOAuthExpireTime()||this.getOAuthExpireTime()<=(new Date).getTime()},getOAuthCredentials:function(){var e=
StackMob.Storage.retrieve("oauth2.accessToken"),j=StackMob.Storage.retrieve("oauth2.macKey"),a=StackMob.Storage.retrieve("oauth2.expires"),b=StackMob.Storage.retrieve(StackMob.REFRESH_TOKEN_KEY),e={"oauth2.accessToken":e,"oauth2.macKey":j,"oauth2.expires":a};e[StackMob.REFRESH_TOKEN_KEY]=b;return e},getOAuthExpireTime:function(){var e=this.Storage.retrieve("oauth2.expires");return e?parseInt(e):null},METHOD_MAP:{create:"POST",read:"GET",update:"PUT","delete":"DELETE",post:"POST",get:"GET",put:"PUT",
addRelationship:"POST",appendAndSave:"PUT",deleteAndSave:"DELETE",login:"GET",accessToken:"POST",refreshToken:"POST",logout:"GET",forgotPassword:"POST",loginWithTempAndSetNewPassword:"GET",resetPassword:"POST",facebookAccessToken:"POST",createUserWithFacebook:"POST",linkUserWithFacebook:"POST"},getProperty:function(e,j){return!e||!e[j]?null:_.isFunction(e[j])?e[j]():e[j]},init:function(e){e=e||{};this.initStart(e);this.userSchema=e.userSchema||this.DEFAULT_LOGIN_SCHEMA;this.loginField=e.loginField||
this.DEFAULT_LOGIN_FIELD;this.passwordField=e.passwordField||this.DEFAULT_PASSWORD_FIELD;this.newPasswordField=e.newPasswordField||"new_password";this.apiVersion=e.apiVersion||this.DEFAULT_API_VERSION;this.appName=this.getProperty(e,"appName")||this.throwError("An appName must be specified");this.clientSubdomain=this.getProperty(e,"clientSubdomain");this.publicKey=e.publicKey;this.apiURL=e.apiURL;this.oauth2targetdomain=e.oauth2targetdomain||this.oauth2targetdomain||"www.stackmob.com";this.secure=
!0===e.secure;this.fullURL=!0===e.fullURL||"undefined"!==typeof PhoneGap||this.fullURL;this.ajax=e.ajax||this.ajax;this.urlRoot=e.urlRoot||this.getBaseURL();this.initEnd(e);return this},initStart:function(){},initEnd:function(){}}}).call(this);
(function(){function e(a,b){var d=StackMob.getBaseURL(),e=b.url.replace(RegExp(d,"g"),"/"),h=d.replace(RegExp("^http://|^https://","g"),"").replace(/\//,""),p=StackMob.Storage.retrieve("oauth2.accessToken"),l=StackMob.Storage.retrieve("oauth2.macKey");StackMob.Storage.retrieve("oauth2.expires");if(StackMob.isOAuth2Mode()&&p&&l){var i=b.type,j=h.split(":"),h=1<j.length?j[0]:h,q=1<j.length?j[1]:"https"==d.substring(0,5)?443:80,d=Math.round((new Date).getTime()/1E3),j="n"+Math.round(1E4*Math.random()),
e=CryptoJS.HmacSHA1(d+"\n"+j+"\n"+i+"\n"+e+"\n"+h+"\n"+q+"\n\n",l).toString(CryptoJS.enc.Base64);return'MAC id="'+p+'",ts="'+d+'",nonce="'+j+'",mac="'+e+'"'}}var j=this;_.extend(StackMob,{isSencha:function(){return j.Ext},isZepto:function(){return j.Zepto},initEnd:function(){StackMob.Model=Backbone.Model.extend({urlRoot:StackMob.urlRoot,url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},getPrimaryKeyField:function(){return this.schemaName+"_id"},constructor:function(){this.setIDAttribute();
Backbone.Model.prototype.constructor.apply(this,arguments)},initialize:function(){StackMob.getProperty(this,"schemaName")||StackMob.throwError("A schemaName must be defined");this.setIDAttribute()},setIDAttribute:function(){this.idAttribute=this.getPrimaryKeyField()},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,b,d){StackMob.sync.call(this,a,this,d)},create:function(a){var b={};b[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(b,a);this.save(null,b)},query:function(a,
b){b=b||{};_.extend(b,{query:a});this.fetch(b)},save:function(a,b){var d=a?a.success:{},e=a?a.error:{};"undefined"===typeof b&&(_.isFunction(d)||_.isFunction(e))?Backbone.Model.prototype.save.call(this,null,a):Backbone.Model.prototype.save.call(this,a,b)},fetchExpanded:function(a,b){(0>a||3<a)&&StackMob.throwError("Depth must be between 0 and 3 inclusive.");var d={};_.extend(d,b);d.data=d.data||{};d.data._expand=a;this.fetch(d)},getAsModel:function(a,b){var d=this.get(a);return d?_.isArray(d)?_.map(d,
function(a){return new b(a)}):new b(d):{}},appendAndCreate:function(a,b,d){this.addRelationship(a,b,d)},addRelationship:function(a,b,d){d=d||{};d[StackMob.ARRAY_FIELDNAME]=a;d[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"addRelationship",this,d)},appendAndSave:function(a,b,d){d=d||{};d[StackMob.ARRAY_FIELDNAME]=a;d[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"appendAndSave",this,d)},deleteAndSave:function(a,b,d,e){e=e||{};e[StackMob.ARRAY_FIELDNAME]=a;e[StackMob.ARRAY_VALUES]=b;e[StackMob.CASCADE_DELETE]=
d;var h=this;e.stackmob_ondeleteAndSave=function(){var d=h.get(a);h.set(a,_.difference(d,b))};StackMob.sync.call(this,"deleteAndSave",this,e)},setBinaryFile:function(a,b,d,e){this.set(a,"Content-Type: "+d+"\nContent-Disposition: attachment; filename="+b+"\nContent-Transfer-Encoding: base64\n\n"+e)},incrementOnSave:function(a,b){this.attributes[this.idAttribute]?(this.attributes[a]&&delete this.attributes[a],this.set(a+"[inc]",b)):StackMob.throwError("Please specify an id for the row you wish to update. When creating a new instance of your object, you need to pass in JSON that includes the id field and value (e.g. var user = new StackMob.User({ username: 'chucknorris' });)  Or, for custom objects: var todoInstance = new Todo({todo_id : '1234'})")},
decrementOnSave:function(a,b){this.incrementOnSave(a,-1*b)}});StackMob.Collection=Backbone.Collection.extend({initialize:function(){this.model||StackMob.throwError("Please specify a StackMob.Model for this collection. e.g., var Items = StackMob.Collection.extend({ model: Item });");this.schemaName=(new this.model).schemaName},url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,
b,d){StackMob.sync.call(this,a,this,d)},query:function(a,b){b=b||{};_.extend(b,{query:a});this.fetch(b)},create:function(a,b){var d={};d[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(d,b);Backbone.Collection.prototype.create.call(this,a,d)},count:function(a,b){a=a||new StackMob.Collection.Query;b=b||{};b.stackmob_count=!0;var d=b.success;b.success=function(a){if(a&&a.getAllResponseHeaders){var b=a.getResponseHeader("Content-Range"),e=0;b&&(e=b.substring(b.indexOf("/")+1,b.length));if(0===e)try{e=JSON.parse(a.responseText).length}catch(l){}d&&
d(e)}else d(a)};a.setRange&&(b.query=a.setRange(0,0));return(this.sync||Backbone.sync).call(this,"query",this,b)}});StackMob.User=StackMob.Model.extend({idAttribute:StackMob.loginField,schemaName:StackMob.userSchema,getPrimaryKeyField:function(){return StackMob.loginField},isLoggedIn:function(a){if(StackMob._containsCallbacks(a,["yes","no"]))a=StackMob._generateCallbacks(a,{isValidResult:function(a){return"undefined"!==typeof a},yes:a.yes,no:a.no,error:a.no}),StackMob.hasValidOAuth(a);else return StackMob.isUserLoggedIn(this.get(StackMob.loginField),
a)},login:function(a,b){b=b||{};StackMob.keepLoggedIn("undefined"===typeof a?!1:a);b.data=b.data||{};b.data[StackMob.loginField]=this.get(StackMob.loginField);b.data[StackMob.passwordField]=this.get(StackMob.passwordField);StackMob.isOAuth2Mode()&&(b.data.token_type="mac");b.stackmob_onaccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,StackMob.isOAuth2Mode()?"accessToken":"login",this,b)},logout:function(a){a=a||{};a.data=a.data||{};a.stackmob_onlogout=function(){StackMob.Storage.remove(StackMob.loggedInUserKey);
StackMob.Storage.remove("oauth2.accessToken");StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY);StackMob.Storage.remove("oauth2.macKey");StackMob.Storage.remove("oauth2.expires");StackMob.Storage.remove("oauth2.user")};(this.sync||Backbone.sync).call(this,"logout",this,a)},loginWithFacebookToken:function(a,b,d){d=d||{};d.data=d.data||{};_.extend(d.data,{fb_at:a,token_type:"mac"});d.stackmob_onfacebookAccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,"facebookAccessToken",this,
d)},createUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});b.data[StackMob.loginField]=b[StackMob.loginField]||this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"createUserWithFacebook",this,b)},linkUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});(this.sync||Backbone.sync).call(this,"linkUserWithFacebook",this,b)},loginWithTempAndSetNewPassword:function(a,b,d,e){e=e||{};e.data=
e.data||{};var h={};h[StackMob.passwordField]=a;this.set(h);e.data[StackMob.newPasswordField]=b;this.login(d,e)},forgotPassword:function(a){a=a||{};a.data=a.data||{};a.data[StackMob.loginField]=this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"forgotPassword",this,a)},resetPassword:function(a,b,d){d=d||{};d.data=d.data||{};d.data.old={password:a};d.data["new"]={password:b};(this.sync||Backbone.sync).call(this,"resetPassword",this,d)}});StackMob.Users=StackMob.Collection.extend({model:StackMob.User});
StackMob.GeoPoint=function(a,b){_.isNumber(a)?((-90>a||90<a)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),(-180>b||180<b)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a,this.lon=b):((-90>a.lat||90<a.lat)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),(-180>a.lon||180<a.lon)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a.lat,this.lon=a.lon)};StackMob.GeoPoint.prototype.toJSON=
function(){return{lat:this.lat,lon:this.lon}};StackMob.Model.Query=function(){this.selectFields=[];this.params={}};_.extend(StackMob.Model.Query.prototype,{select:function(a){this.selectFields.push(a);return this},setExpand:function(a){this.params._expand=a;return this}});StackMob.Collection.Query=function(){this.params={};this.selectFields=[];this.orderBy=[];this.range=null};StackMob.Collection.Query.prototype=new StackMob.Model.Query;StackMob.Collection.Query.prototype.constructor=StackMob.Collection.Query;
_.extend(StackMob.Collection.Query.prototype,{addParam:function(a,b){this.params[a]=b;return this},equals:function(a,b){this.params[a]=b;return this},lt:function(a,b){this.params[a+"[lt]"]=b;return this},lte:function(a,b){this.params[a+"[lte]"]=b;return this},gt:function(a,b){this.params[a+"[gt]"]=b;return this},gte:function(a,b){this.params[a+"[gte]"]=b;return this},notEquals:function(a,b){this.params[a+"[ne]"]=b;return this},isNull:function(a){this.params[a+"[null]"]=!0;return this},isNotNull:function(a){this.params[a+
"[null]"]=!1;return this},mustBeOneOf:function(a,b){var d="";if(_.isArray(b))for(var e=b.length,h=0;h<e;h++)d+=b[h],h+1<e&&(d+=",");else d=b;this.params[a+"[in]"]=d;return this},orderAsc:function(a){this.orderBy.push(a+":asc");return this},orderDesc:function(a){this.orderBy.push(a+":desc");return this},setRange:function(a,b){this.range={start:a,end:b};return this},mustBeNear:function(a,b,d){this.params[a+"[near]"]=b.lat+","+b.lon+","+d;return this},mustBeNearMi:function(a,b,d){this.mustBeNear(a,b,
d/StackMob.EARTH_RADIANS_MI);return this},mustBeNearKm:function(a,b,d){this.mustBeNear(a,b,d/StackMob.EARTH_RADIANS_KM);return this},isWithin:function(a,b,d){this.params[a+"[within]"]=b.lat+","+b.lon+","+d;return this},isWithinMi:function(a,b,d){this.isWithin(a,b,d/StackMob.EARTH_RADIANS_MI);return this},isWithinKm:function(a,b,d){this.isWithin(a,b,d/StackMob.EARTH_RADIANS_KM);return this},isWithinBox:function(a,b,d){this.params[a+"[within]"]=b.lat+","+b.lon+","+d.lat+","+d.lon;return this}})},cc:function(a,
b,d,e){this.customcode(a,b,d,e)},customcode:function(a,b,d,e){_.isObject(d)?(e=d||{},d=(d=e.httpVerb)&&!_.isUndefined(StackMob.METHOD_MAP[d.toLowerCase()])?d:"GET",e.httpVerb=d):(e=e||{},_.isString(d)&&(d&&!_.isUndefined(StackMob.METHOD_MAP[d.toLowerCase()]))&&(e.httpVerb=d.toUpperCase()));e.data=e.data||{};"GET"!==d&&(e.contentType=e.contentType||StackMob.CONTENT_TYPE_JSON);_.extend(e.data,b);e.url=StackMob.apiURL||(0===StackMob.apiVersion?StackMob.getDevAPIBase():StackMob.getProdAPIBase());this.sync.call(StackMob,
a,null,e)},processLogin:function(a){if(StackMob.isOAuth2Mode()){var b=a.access_token,d=a.refresh_token,e=a.mac_key,h=a.expires_in,p=null;try{var p=a.stackmob.user[StackMob.loginField],l=StackMob.prepareCredsForSaving(b,d,e,h,p);StackMob.saveOAuthCredentials(l);StackMob.Storage.persist(StackMob.loggedInUserKey,p)}catch(i){console&&console.error("Problem saving OAuth 2.0 credentials and user")}}},getCallId:function(a,b){var d={method:a,model:b||{},time:(new Date).getTime()};return JSON.stringify(d)},
sync:function(a,b,d){d=d||{};if(!StackMob.isAccessTokenMethod(a)&&StackMob.shouldSendRefreshToken()&&!0!==d.stackmob_attempted_refresh){var g=a,h=d;h.stackmob_attempted_refresh=!0;var p=this;StackMob.refreshSession.call(StackMob,{oncomplete:function(){StackMob.sync.call(p,g,b,h)}});return!1}var l=!0===d[StackMob.FORCE_CREATE_REQUEST];l&&(a="create");var i=_.extend({type:d.httpVerb||StackMob.METHOD_MAP[a]||"GET",dataType:"json"},d);i.data=i.data||{};!i.url&&b&&(i.url=StackMob.getProperty(b,"url"));
var j="cc"!=a,q=b&&b.isNew&&!b.isNew(),l=!l,v="addRelationship"==a||"appendAndSave"==a||"deleteAndSave"==a;if(_.include("create update delete read query deleteAndSave appendAndSave addRelationship".split(" "),a)){if(v||j&&q&&l)i.url+=("/"==i.url.charAt(i.url.length-1)?"":"/")+encodeURIComponent(b.get(b.getPrimaryKeyField())),v&&(i.url+="/"+d[StackMob.ARRAY_FIELDNAME]),"deleteAndSave"==a&&(j="",j=_.isArray(d[StackMob.ARRAY_VALUES])?_.map(d[StackMob.ARRAY_VALUES],function(a){return encodeURIComponent(a)}).join(","):
encodeURIComponent(d[StackMob.ARRAY_VALUES]),i.url+="/"+j)}else i.url+=("/"==i.url.charAt(i.url.length-1)?"":"/")+a;j=d;i.headers=i.headers||{};i.headers=_.extend({Accept:"application/vnd.stackmob+json; version="+StackMob.apiVersion},i.headers);_.extend(i.headers,{"X-StackMob-User-Agent":"StackMob (JS; "+StackMob.sdkVersion+")"});StackMob.publicKey&&!StackMob.privateKey?(i.headers["X-StackMob-API-Key"]=StackMob.publicKey,i.headers["X-StackMob-Proxy-Plain"]="stackmob-api"):i.headers["X-StackMob-Proxy"]=
"stackmob-api";StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(a)?i.contentType="application/x-www-form-urlencoded":_.include(["PUT","POST"],StackMob.METHOD_MAP[a])&&(i.contentType=i.contentType||StackMob.CONTENT_TYPE_JSON);isNaN(j[StackMob.CASCADE_DELETE])||(i.headers["X-StackMob-CascadeDelete"]=!0==j[StackMob.CASCADE_DELETE]);if(j.query&&(j=i.query||throwError("No StackMobQuery object provided to the query call."),j.selectFields&&0<j.selectFields.length&&(i.headers["X-StackMob-Select"]=j.selectFields.join()),
j.range&&(i.headers.Range="objects="+j.range.start+"-"+j.range.end),_.extend(i.data,j.params),j.orderBy&&0<j.orderBy.length)){j=j.orderBy;q="";l=j.length;for(v=0;v<l;v++)q+=j[v],v+1<l&&(q+=",");i.headers["X-StackMob-OrderBy"]=q}j=a;q=function(a){return _.map(_.keys(a),function(b){return b+"="+encodeURIComponent(a[b])}).join("&")};d=d||{};if(StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(j))i.data=q(i.data);else if("POST"==i.type||"PUT"==i.type)if("resetPassword"==j||"forgotPassword"==j)i.data=
JSON.stringify(i.data);else if("addRelationship"==j||"appendAndSave"==j)d&&d[StackMob.ARRAY_VALUES]&&(i.data=JSON.stringify(d[StackMob.ARRAY_VALUES]));else if(b){var n=b.toJSON();_.each(d.remote_ignore||[],function(a){delete n[a]});delete n.lastmoddate;delete n.createddate;"update"==j&&delete n[StackMob.passwordField];StackMob.isOAuth2Mode()&&delete n.sm_owner;i.data=JSON.stringify(_.extend(n,i.data))}else i.data=JSON.stringify(i.data);else"GET"==i.type&&!_.isEmpty(i.data)&&(i.url+="?",d=q(i.data),
i.url+=d),delete i.data;d=i||{};d.processData=!1;d.accepts=d.headers.Accept;StackMob.isAccessTokenMethod(a)||(d=a,StackMob.isAccessTokenMethod(d)||(d=e(d,i))&&(i.headers.Authorization=d));StackMob.makeAPICall(b,i,a)},refreshSession:function(a){var b={};_.extend(b,a);if(StackMob.hasRefreshToken()){b.url="/"+StackMob.userSchema;b.contentType="application/x-www-form-urlencoded";b.data={refresh_token:StackMob.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY],grant_type:"refresh_token",token_type:"mac",
mac_algorithm:"hmac-sha1"};var d=a.oncomplete;d&&(b.oncomplete=function(){d()});a&&a.success&&(b.success=a.success);b.stackmob_onrefreshToken=StackMob.processLogin;b.error=function(){a&&a.error&&a.error();StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY)};(this.sync||Backbone.sync).call(this,"refreshToken",this,b)}},makeAPICall:function(a,b,d){return StackMob.ajax?StackMob.ajax(a,b,d):StackMob.isSencha()?StackMob.ajaxOptions.sencha(a,b,d):StackMob.isZepto()?StackMob.ajaxOptions.zepto(a,b,d):StackMob.ajaxOptions.jquery(a,
b,d)},onsuccess:function(a,b,d,e,h){if(d){if(_.isFunction(d["stackmob_on"+b]))d["stackmob_on"+b](e);if(_.isFunction(d.oncomplete))d.oncomplete(e)}h&&(e?(StackMob.isOAuth2Mode()&&(StackMob.isAccessTokenMethod(b)&&e.stackmob)&&(e=e.stackmob.user),h(e)):h())},onerror:function(a,b,d,g,h,j){var l=a.status,i;try{i=JSON.parse(b)}catch(s){i={error:"Invalid JSON returned."}}if(503==l){a=a.getResponseHeader("retry-after");try{a=1E3*parseInt(responseHeaderValue)}catch(q){a=StackMob.RETRY_WAIT}if("number"===
typeof h.stackmob_retry){if(h.stackmob_retry-=1,0>=h.stackmob_retry)return}else h.stackmob_retry=StackMob.RETRY_ATTEMPTS;_.delay(function(){var a=e(g,h);h.headers.Authorization=a;d(h)},a)}else{if(_.isFunction(h.oncomplete))h.oncomplete(i);j&&j(g,i)}},isAccessTokenMethod:function(a){return _.include(["accessToken","facebookAccessToken","refreshToken"],a)}})}).call(this);
(function(){var e=this.jQuery||this.Ext||this.Zepto;_.extend(StackMob,{ajaxOptions:{sencha:function(j,a,b){var d={},g=a.success;a.success=function(d){var e=d&&d.responseText?JSON.parse(d.responseText):null;!0===a.stackmob_count&&(e=d);StackMob.onsuccess(j,b,a,e,g)};var h=a.error;d.url=a.url;d.headers=a.headers;d.params=a.data;d.success=a.success;d.disableCaching=!1;d.method=a.type;a.error=function(a){StackMob.onerror(a,a.responseText||a.text,e.Ajax.request,j,d,h)};d.failure=a.error;return e.Ajax.request(d)},
zepto:function(j,a,b){var d=a.success,g=function(e,g){g=e?JSON.parse(e):null;StackMob.onsuccess(j,b,a,g,d)};a.success=g;var h=a.error,p=function(b){StackMob.onerror(b,b.responseText||b.text,e.ajax,j,a,h)};a.error=p;var l={};l.url=a.url;l.headers=a.headers;l.contentType=a.headers.contentType;l.type=a.type;l.data=a.data;l.success=g;l.error=p;return e.ajax(l)},jquery:function(j,a,b){a.beforeSend=function(a,b){a.setRequestHeader("Accept",b.accepts);if(!_.isEmpty(b.headers))for(key in b.headers)a.setRequestHeader(key,
b.headers[key])};var d=a.error;a.error=function(b,g,l){if(0==b.status&&a.query&&"object"===typeof a.query.range)this.success(b,g,l);else StackMob.onerror(b,b.responseText||b.text,e.ajax,j,a,d)};var g=a.success;a.success=function(d,e,j){var i;!0===a.stackmob_count?i=j:d&&d.toJSON?i=d:d&&(d.responseText||d.text)?i=JSON.parse(d.responseText||d.text):d&&(i=d);StackMob.onsuccess(d,b,a,i,g)};return e.ajax(a)}}})}).call(this);
var CryptoJS=CryptoJS||function(e,j){var a={},b=a.lib={},d=function(){},g=b.Base={extend:function(a){d.prototype=this;var b=new d;a&&b.mixIn(a);b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}},h=b.WordArray=g.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=
b!=j?b:4*a.length},toString:function(a){return(a||l).stringify(this)},concat:function(a){var b=this.words,d=a.words,e=this.sigBytes,a=a.sigBytes;this.clamp();if(e%4)for(var g=0;g<a;g++)b[e+g>>>2]|=(d[g>>>2]>>>24-8*(g%4)&255)<<24-8*((e+g)%4);else if(65535<d.length)for(g=0;g<a;g+=4)b[e+g>>>2]=d[g>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-8*(b%4);a.length=e.ceil(b/4)},clone:function(){var a=g.clone.call(this);
a.words=this.words.slice(0);return a},random:function(a){for(var b=[],d=0;d<a;d+=4)b.push(4294967296*e.random()|0);return h.create(b,a)}}),p=a.enc={},l=p.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,d=[],e=0;e<a;e++){var g=b[e>>>2]>>>24-8*(e%4)&255;d.push((g>>>4).toString(16));d.push((g&15).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,d=[],e=0;e<b;e+=2)d[e>>>3]|=parseInt(a.substr(e,2),16)<<24-4*(e%8);return h.create(d,b/2)}},i=p.Latin1={stringify:function(a){for(var b=
a.words,a=a.sigBytes,d=[],e=0;e<a;e++)d.push(String.fromCharCode(b[e>>>2]>>>24-8*(e%4)&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],e=0;e<b;e++)d[e>>>2]|=(a.charCodeAt(e)&255)<<24-8*(e%4);return h.create(d,b)}},s=p.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},q=b.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=h.create();
this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=s.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,g=b.sigBytes,i=this.blockSize,j=g/(4*i),j=a?e.ceil(j):e.max((j|0)-this._minBufferSize,0),a=j*i,g=e.min(4*a,g);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(d,l);l=d.splice(0,a);b.sigBytes-=g}return h.create(l,g)},clone:function(){var a=g.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});b.Hasher=q.extend({init:function(){this.reset()},
reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);this._doFinalize();return this._hash},clone:function(){var a=q.clone.call(this);a._hash=this._hash.clone();return a},blockSize:16,_createHelper:function(a){return function(b,d){return a.create(d).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return v.HMAC.create(a,d).finalize(b)}}});var v=a.algo={};return a}(Math);
(function(){var e=CryptoJS,j=e.lib,a=j.WordArray,j=j.Hasher,b=[],d=e.algo.SHA1=j.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,d){for(var e=this._hash.words,j=e[0],i=e[1],s=e[2],q=e[3],v=e[4],n=0;80>n;n++){if(16>n)b[n]=a[d+n]|0;else{var u=b[n-3]^b[n-8]^b[n-14]^b[n-16];b[n]=u<<1|u>>>31}u=(j<<5|j>>>27)+v+b[n];u=20>n?u+((i&s|~i&q)+1518500249):40>n?u+((i^s^q)+1859775393):60>n?u+((i&s|i&q|s&q)-1894007588):u+((i^s^q)-
899497514);v=q;q=s;s=i<<30|i>>>2;i=j;j=u}e[0]=e[0]+j|0;e[1]=e[1]+i|0;e[2]=e[2]+s|0;e[3]=e[3]+q|0;e[4]=e[4]+v|0},_doFinalize:function(){var a=this._data,b=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;b[e>>>5]|=128<<24-e%32;b[(e+64>>>9<<4)+15]=d;a.sigBytes=4*b.length;this._process()}});e.SHA1=j._createHelper(d);e.HmacSHA1=j._createHmacHelper(d)})();
(function(){var e=CryptoJS,j=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(a,b){a=this._hasher=a.create();"string"==typeof b&&(b=j.parse(b));var d=a.blockSize,e=4*d;b.sigBytes>e&&(b=a.finalize(b));for(var h=this._oKey=b.clone(),p=this._iKey=b.clone(),l=h.words,i=p.words,s=0;s<d;s++)l[s]^=1549556828,i[s]^=909522486;h.sigBytes=p.sigBytes=e;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=
this._hasher,a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
(function(){var e=CryptoJS,j=e.lib.WordArray;e.enc.Base64={stringify:function(a){var b=a.words,d=a.sigBytes,e=this._map;a.clamp();for(var a=[],h=0;h<d;h+=3)for(var j=(b[h>>>2]>>>24-8*(h%4)&255)<<16|(b[h+1>>>2]>>>24-8*((h+1)%4)&255)<<8|b[h+2>>>2]>>>24-8*((h+2)%4)&255,l=0;4>l&&h+0.75*l<d;l++)a.push(e.charAt(j>>>6*(3-l)&63));if(b=e.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var a=a.replace(/\s/g,""),b=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(b=e));
for(var e=[],h=0,p=0;p<b;p++)if(p%4){var l=d.indexOf(a.charAt(p-1))<<2*(p%4),i=d.indexOf(a.charAt(p))>>>6-2*(p%4);e[h>>>2]|=(l|i)<<24-8*(h%4);h++}return j.create(e,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
